<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thiệp Mừng 20/10 Tặng Mẹ</title>
    <style>
                body {
                        box-sizing: border-box;
                        margin: 0;
                        font-family: 'Poppins', sans-serif;
                        background: linear-gradient(to bottom, #fffaf5, #ffe6f0);
                        overflow-x: hidden;
                        color: #333;
                        text-align: center;
                        height: 100%;

        }

                html {
                        height: 100%;

        }


        /* Thiệp */
                .card-container {
                        position: absolute;
                        top: 100px;
                        left: 50%;
                        transform: translateX(-50%);
                        width: 320px;
                        height: 200px;
                        perspective: 1000px;
                        cursor: pointer;
                        z-index: 10;

        }

                .card {
                        width: 100%;
                        height: 100%;
                        position: relative;
                        transform-style: preserve-3d;
                        transition: transform 1s;

        }

                    .card.open {
                            transform: rotateY(180deg);

        }

                .card-front, .card-back {
                        position: absolute;
                        width: 100%;
                        height: 100%;
                        border-radius: 10px;
                        backface-visibility: hidden;
                        box-shadow: 0 8px 20px rgba(0,0,0,0.1);

        }

                .card-front {
                        background: linear-gradient(135deg, #ff69b4, #ff1493);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        font-size: 1.2em;
                        font-weight: bold;
                        color: white;
                        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);

        }

                .card-back {
                        background: #fff0f5;
                        transform: rotateY(180deg);
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        padding: 20px;
                        box-sizing: border-box;
                        font-size: 1em;
                        color: #e75480;
                        text-align: center;
                        line-height: 1.4;

        }


        /* Hoa bên lề */
                .flowers {
                        position: fixed;
                        top: 0;
                        bottom: 0;
                        width: 80px;
                        z-index: 1;
                        pointer-events: none;
                        opacity: 0.6;

        }

                    .flowers.left {
                            left: 0;
                            background: linear-gradient(to right, #ff69b4, transparent);

        }

                    .flowers.right {
                            right: 0;
                            background: linear-gradient(to left, #ff69b4, transparent);

        }


        /* Decorative flowers */
                .flower-decoration {
                        position: absolute;
                        font-size: 2em;
                        animation: float 3s ease-in-out infinite;

        }

                    .flower-decoration:nth-child(1) {
                            top: 20%;
                            left: 10%;
                            animation-delay: 0s;

        }

                    .flower-decoration:nth-child(2) {
                            top: 30%;
                            right: 15%;
                            animation-delay: 1s;

        }

                    .flower-decoration:nth-child(3) {
                            top: 60%;
                            left: 5%;
                            animation-delay: 2s;

        }

                    .flower-decoration:nth-child(4) {
                            top: 70%;
                            right: 10%;
                            animation-delay: 0.5s;

        }

                @keyframes float {
                        0%, 100%

        {
                            transform: translateY(0px);

        }

                    50% {
                            transform: translateY(-10px);

        }


        }


        /* ------------------------------------- */

        /* CSS MỚI CHO HÌNH ẢNH */

        /* ------------------------------------- */
                .photo-section {
                        margin-top: 340px;
                        height: 0;
                        position: relative;

        }


        /* CSS MỚI ĐỂ CHỨA VÀ HIỂN THỊ ẢNH TRÒN */
                .photo-placeholder {
                        width: 120px;
                        height: 120px;
                        border-radius: 50%;

            /* Bỏ background gradient và text cũ */
                        display: block;
                        transition: transform 0.6s;
                        border: 4px solid #ff69b4;
                        box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3);
                        position: fixed;
                        z-index: 5;
                        overflow: hidden; /* Cắt ảnh thừa ra khỏi hình tròn */

        }

                    .photo-placeholder img {
                            width: 100%;
                            height: 100%;
                            object-fit: cover;

            /* Ảnh không cần border-radius vì div cha đã có */

        }

                    .photo-placeholder.left {
                            left: 60px;
                            top: 50%;
                            transform: translateY(-50%);
                            animation: bubble 2s ease-in-out infinite;

        }

                    .photo-placeholder.right {
                            right: 60px;
                            top: 50%;
                            transform: translateY(-50%);
                            animation: bubble 2s ease-in-out infinite 1s;

        }

                @keyframes bubble {
                        0%, 100%

        {
                            transform: translateY(-50%) scale(1);

        }

                    50% {
                            transform: translateY(-50%) scale(1.1);

        }


        }

                .photo-placeholder:hover {
                        animation-play-state: paused;
                        transform: translateY(-50%) scale(1.15);

        }


        /* Bộ sưu tập 5 hình */
                .gallery {
                        margin-top: 60px;
                        display: grid;
                        grid-template-columns: repeat(2, 250px);
                        grid-template-rows: repeat(3, 250px);
                        gap: 20px;
                        justify-content: center;
                        align-items: center;
                        max-width: 600px;
                        margin-left: auto;
                        margin-right: auto;

        }


        /* CSS MỚI ĐỂ CHỨA VÀ HIỂN THỊ ẢNH VUÔNG */
                .gallery-item {
                        width: 250px;
                        height: 250px;
                        border-radius: 10px;

            /* Bỏ background gradient và text cũ */
                        display: block;
                        opacity: 0;
                        transform: scale(0.9);
                        transition: all 0.8s ease;
                        border: 3px solid #ff69b4;
                        box-shadow: 0 4px 15px rgba(255, 105, 180, 0.2);
                        overflow: hidden; /* Cắt ảnh thừa ra khỏi khung vuông */

        }

                    .gallery-item img {
                            width: 100%;
                            height: 100%;
                            object-fit: cover;
                            border-radius: 7px; /* Thêm bo góc nhẹ cho ảnh */

        }


                    .gallery-item.visible {
                            opacity: 1;
                            transform: scale(1);

        }

                    .gallery-item:hover {
                            transform: scale(1.05);

        }

                    .gallery-item:nth-child(1) {
                            grid-column: 1;
                            grid-row: 1;

        }

                    .gallery-item:nth-child(2) {
                            grid-column: 2;
                            grid-row: 1;

        }

                    .gallery-item:nth-child(3) {
                            grid-column: 1 / 3;
                            grid-row: 2;
                            justify-self: center;

        }

                    .gallery-item:nth-child(4) {
                            grid-column: 1;
                            grid-row: 3;

        }

                    .gallery-item:nth-child(5) {
                            grid-column: 2;
                            grid-row: 3;

        }


        /* Lời kết */
                .footer {
                        margin: 50px 0 90px;
                        font-size: 1.2em;
                        font-weight: bold;
                        color: #e75480;
                        padding: 0 20px;

        }


        /* Responsive */
                @media (max-width: 768px) {
                        .card-container

        {
                            width: 280px;
                            height: 180px;

        }

                    .photo-placeholder {
                            width: 80px;
                            height: 80px;

        }

                        .photo-placeholder.left {
                                left: 30px;

        }

                        .photo-placeholder.right {
                                right: 30px;

        }

                    .gallery {
                            margin-top: 60px;
                            display: grid;
                            grid-template-columns: repeat(2, 250px);
                            grid-template-rows: repeat(3, 250px);
                            gap: 20px;
                            justify-content: center;
                            align-items: center;
                            max-width: 600px;
                            margin-left: auto;
                            margin-right: auto;

        }


        /* CSS MỚI ĐỂ CHỨA VÀ HIỂN THỊ ẢNH VUÔNG */
                    .gallery-item {
                            width: 250px;
                            height: 250px;
                            border-radius: 10px;
                            display: block;
                            opacity: 0;
                            transform: scale(0.9);
                            transition: all 0.8s ease;
                            border: 3px solid #ff69b4;
                            box-shadow: 0 4px 15px rgba(255, 105, 180, 0.2);
                            overflow: hidden;

            /* ------------------------------------- */

            /* THÊM HIỆU ỨNG BUBBLE VÀO ĐÂY */

            /* ------------------------------------- */
                            animation: bubble-gallery 3s ease-in-out infinite;

        }


        /* Định nghĩa một Keyframe mới cho Gallery để tránh xung đột với ảnh Mẹ/Con */
                    @keyframes bubble-gallery {
                            0%, 100%

        {
                                transform: scale(1); /* Bắt đầu/Kết thúc ở kích thước bình thường */

        }

                        50% {
                                transform: scale(1.03); /* Phồng lên nhẹ */

        }


        }


        /* Điều chỉnh lại hiệu ứng khi xuất hiện */
                    .gallery-item.visible {
                            opacity: 1;

            /* KHÔNG ĐẶT transform: scale(1) ở đây nữa để animation có thể chạy */

        }


        /* Hiệu ứng khi di chuột qua */
                    .gallery-item:hover {
                            animation-play-state: paused; /* Tạm dừng hiệu ứng bubble */
                            transform: scale(1.1); /* Phóng to rõ ràng hơn */
                            z-index: 2; /* Đảm bảo ảnh nằm trên các ảnh khác khi phóng to */

        }

                    .gallery-item img {
                            width: 100%;
                            height: 100%;
                            object-fit: cover;
                            border-radius: 7px;

        }

                        .gallery-item:nth-child(1) {
                                grid-row: 1;

        }

                        .gallery-item:nth-child(2) {
                                grid-row: 2;

        }

                        .gallery-item:nth-child(3) {
                                grid-row: 3;

        }

                        .gallery-item:nth-child(4) {
                                grid-row: 4;

        }

                        .gallery-item:nth-child(5) {
                                grid-row: 5;

        }


        }

    </style>
</head>
<body>
    <audio id="background-music" loop>
        <source src="mu.m4a" type="audio/mp4">
        Trình duyệt của bạn không hỗ trợ phần tử audio.
    </audio>

    <div class="flowers left"></div>
    <div class="flowers right"></div>

    <div class="flower-decoration">🌸</div>
    <div class="flower-decoration">🌺</div>
    <div class="flower-decoration">🌸</div>
    <div class="flower-decoration">🌺</div>

    <main>
        <div class="card-container" onclick="toggleCard()">
            <div class="card" id="card">
                <div class="card-front">
                    <div>
                        <div style="font-size: 1.5em; margin-bottom: 10px;">💐</div>
                        <div>Chúc Mừng Ngày Phụ Nữ Việt Nam</div>
                        <div style="font-size: 0.9em; margin-top: 5px;">20/10</div>
                        <div style="font-size: 0.8em; margin-top: 10px; opacity: 0.9;">Nhấn để mở thiệp</div>
                    </div>
                </div>
                <div class="card-back">
                    <div>
                        <div style="font-size: 1.3em; margin-bottom: 15px;">💖</div>
                        <div style="font-weight: bold; margin-bottom: 10px;">Gửi mẹ Bảo Trân, </div>
                        <div>Cảm ơn mẹ vì tất cả những gì mẹ đã làm cho con. Chúc mẹ luôn khỏe mạnh, hạnh phúc và xinh đẹp!</div>
                        <div style="margin-top: 15px; font-style: italic;">❤️ Con trai của mẹ</div>
                    </div>
                </div>
            </div>
        </div>

        <section class="photo-section">
            <div class="photo-placeholder left">
                <img src="hh1.jpg" alt="Ảnh Mẹ">
            </div>
            <div class="photo-placeholder right">
                <img src="hh2.jpg" alt="Ảnh Con">
            </div>
        </section>

        <section class="gallery">
            <div class="gallery-item">
                <img src="h1.jpg" alt="Kỷ niệm đẹp">
            </div>
            <div class="gallery-item">
                <img src="h2.jpg" alt="Sinh nhật mẹ">
            </div>
            <div class="gallery-item">
                <img src="h3.jpg" alt="Mẹ và con lãnh thưởng">
            </div>
            <div class="gallery-item">
                <img src="h4.jpg" alt="Dạo phố">
            </div>
            <div class="gallery-item">
                <img src="h5.jpg" alt="Đi ăn">
            </div>
        </section>

        <footer class="footer">
            <div>💐 Chúc mẹ ngày 20/10 thật hạnh phúc! 💐</div>
            <div style="font-size: 0.9em; margin-top: 10px; opacity: 0.8;">Con yêu mẹ đẹp như tiên mẹ thêm dấu huyền mẹ gửi cho con ❤️</div>
        </footer>
    </main>

    <script>
        // Biến để theo dõi xem nhạc đã được cố gắng phát lần nào chưa
        let isMusicPlayed = false;

        function toggleCard() {
            const card = document.getElementById('card');
            const music = document.getElementById('background-music'); // Lấy thẻ audio

            card.classList.toggle('open');

            // 💖 CODE MỚI: Phát nhạc khi thiệp được mở lần đầu (do có tương tác click) 💖
            if (card.classList.contains('open') && !isMusicPlayed) {
                music.play().then(() => {
                    console.log('Nhạc nền đã được phát.');
                    isMusicPlayed = true;
                }).catch(error => {
                    // Nếu trình duyệt chặn, báo lỗi (người dùng vẫn phải click nút play nếu có)
                    console.error('Không thể tự động phát nhạc (cần tương tác người dùng):', error);
                });
            }
        }

        // Hiệu ứng xuất hiện cho gallery
        function showGalleryItems() {
            const galleryItems = document.querySelectorAll('.gallery-item');
            const observer = new IntersectionObserver((entries) => {
                entries.forEach((entry, index) => {
                    // Thêm class visible khi phần tử vào viewport
                    if (entry.isIntersecting) {
                        setTimeout(() => {
                            entry.target.classList.add('visible');
                        }, index * 200);
                        // Ngừng quan sát sau khi đã hiện (chỉ hiện 1 lần)
                        observer.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.1
            });

            galleryItems.forEach(item => {
                observer.observe(item);
            });
        }

        // Khởi tạo khi trang load
        document.addEventListener('DOMContentLoaded', function () {
            showGalleryItems();
        });
    </script>
</body>
</html>